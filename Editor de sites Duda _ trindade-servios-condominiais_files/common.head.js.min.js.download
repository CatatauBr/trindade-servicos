!function(e){var i={};function defineSingleProperty(e,n){Object.defineProperty(i,e,{configurable:!1,enumerable:!0,writable:!1,value:n})}Object.defineProperty(e,"uiPerms",{configurable:!1,enumerable:!0,writable:!1,value:i}),e.initUIPerms=function init(e){var i;for(i in"string"==typeof e&&(e=JSON.parse(atob(e))),e)defineSingleProperty(i,e[i])}}(window);
!function(e){"use strict";var n={USE_CUSTOM_DOMAIN:"custom-domain",BACKUPS:"site-backup",HIDE_PAGE_PER_DEVICE:"hide-page-per-device",EDIT_BACKGROUND:"edit-background",HIDE_PER_DEVICE:"hide-per-device",CSS_EDITOR:"css-editor",REMOVE_FOOTER:"remove-footer",URL_REDIRECT:"url-redirect",ECOMMERCE_MEDIUM:"100-products-store",ECOMMERCE_LARGE:"2500-products-store",ECOMMERCE_X_LARGE:"unlimited-products-store",PASSWORD_PROTECTED_PAGES:"password-protected-pages"},t="extralarge",a="large",r="medium",i="small",l={USE_CUSTOM_DOMAIN:function(n){return!e.isReseller||canResellerPublishWithinPlan(n)},ADD_PAGE:function(e){if(o[e].featuresMetadata.ADD_PAGE){var n=o[e].featuresMetadata.ADD_PAGE.pages_limit;if(n)return-1==(n=parseInt(n))||$.dmx.sitePages.length-1<n}return!0},CUSTOM_WIDGET:function(e,n){var t=o[e],a=t.featuresMetadata.CUSTOM_WIDGET;if(a&&a["allowed.widgets"]&&n){var r=a["allowed.widgets"].split(",").map((function(e){return e.trim()}));return _.indexOf(r,n.widgetId)>=0||null!=t.parentId&&l.CUSTOM_WIDGET(t.parentId,n)}return!1}},u=["1","2","3","5","6","7","8","9"],o={},s={},c={},E={},f={};function getNextPlansIds(e){var n=_normalizePlan(e).grade,t=getAllTierPlans(e).map((function(e){return e.planId+""})),a=Math.min(),r=a;return t.filter((function(e){return _normalizePlan(e).grade>n})).forEach((function(e){var n=_normalizePlan(e);r=Math.min(n.grade,r)})),a===r?[]:t.filter((function(e){return _normalizePlan(e).grade===r}))}function getNextPlans(e){return getNextPlansIds(e).map(_normalizePlan)}function getTierName(e){var n;return n="TIER"+(e=_normalizePlan(e)).grade,"MOBILE"===e.type&&(n+="_MOBILE"),n}function isFeatureInPlan(e,n,t){var a=!1,r=(e=_normalizeFeature(e),_normalizePlan(n||getSafe("$.dmx.site.planId")).planId);a=!!e&&_contains(e.availableInPlans,r);return e&&l[e.id]&&(a=a&&l[e.id](r,t)),a}function canResellerPublishWithinPlan(e){return _normalizePlan(e).canResellerPublish}function getMinimalPlanWithFeature(e,n,t,a){var r,i=getAllTierPlans(e),l=Math.min();return i.forEach((function(i){isFeatureInPlan(n,i,a)&&i.grade<l&&(_normalizePlan(e).grade<i.grade||!t)&&(r=i,l=i.grade)})),r}function getAllTierPlans(e){for(var n=[e=_normalizePlan(e)],t=e;null!=t.parentId;)t=_normalizePlan(t.parentId),n.push(t);return getAllTierPlansRecursive(e,n),n}function getAllTierPlansRecursive(e,n){e.children&&0!=e.children.length&&e.children.forEach((function(e){var t=_normalizePlan(e);n.push(t),getAllTierPlansRecursive(t,n)}))}function _contains(e,n){var t=-1!==e.indexOf(n)||n&&n.toString&&-1!==e.indexOf(n.toString());return t||(n=n.toString(),t=-1!==e.indexOf(n)||n&&n.toString&&-1!==e.indexOf(n.toString())),t}function _extend(e,n){return Object.keys(n).forEach((function(t){e[t]=n[t]})),e}function _normalizePlan(e){return"object"!=typeof e?e=o[e.toString()]:e.id&&(e=o[e.id]),e}function _normalizeFeature(e){return"object"!=typeof e&&(e=s[e]),e}_extend(c,{init:function init(t){var a=JSON.parse(atob(t.encodedPlans)),r=JSON.parse(atob(t.encodedPlanFeaturesMetadata));_extend(E,function _processPlanFeatures(n){return Object.keys(n).forEach((function(t){Object.keys(n[t]).forEach((function(a){Object.keys(n[t][a]).forEach((function(r){n[t][a][r]=e.dmStr[n[t][a][r]]||n[t][a][r]}))}))})),n}(r)),_extend(o,function _processPlans(e){return Object.keys(e).forEach((function(n){var t=e[n];_extend(t,{tooltipSettings:t.tooltipSettings?t.tooltipSettings:{title:"",upgrades:[]},featuresMetadata:E[n+""]||{}})})),e}(a)),_extend(s,function _generateFeatures(){var e={},isFeatureInPlan=function(e,n){return _contains(n.features,e)},t=Object.keys(o);return t.forEach((function(t){o[t].features.forEach((function(t){e[t]=e[t]||{name:n[t]||t,tiers:[],availableInPlans:[],minimalPlan:Math.min(),id:t}}))})),Object.keys(e).forEach((function(n){t.forEach((function(t){var a=o[t],r=getTierName(a);!_contains(e[n].availableInPlans,t)&&isFeatureInPlan(n,a)&&(_contains(e[n].tiers,r)||e[n].tiers.push(r),e[n].availableInPlans.push(t))})),e[n].tiers.sort()})),e}()),function _freezeAll(){Object.keys(o).forEach((function(e){var n=o[e];Object.freeze(n.tooltipSettings),Object.freeze(n)})),Object.freeze(o),Object.keys(s).forEach((function(e){var n=s[e];Object.freeze(n)})),Object.freeze(s)}()},isFreePlan:function isFreePlan(e){var n=_normalizePlan(e);return!!n&&(n.isFree&&this.isDPlan(n))},getTierName,plans:o,features:s,getNextPlansIds,getNextPlans,getNextTiers:function getNextTiers(e){return getNextPlans(e).map(getTierName).sort()},isFeatureInPlan,getPlanObject:function getPlanObject(e){return _normalizePlan(e)},getPlanStoreSize:function getPlanStoreSize(e){var n;return isFeatureInPlan("ECOMMERCE_X_LARGE",e)?n=t:isFeatureInPlan("ECOMMERCE_LARGE",e)?n=a:isFeatureInPlan("ECOMMERCE_MEDIUM",e)?n=r:isFeatureInPlan("ECOMMERCE_SMALL",e)&&(n=i),n},getPlanStoreSizeKey:function getPlanStoreSizeKey(e){var n;return isFeatureInPlan("ECOMMERCE_X_LARGE",e)?n="ECOMMERCE_X_LARGE":isFeatureInPlan("ECOMMERCE_LARGE",e)?n="ECOMMERCE_LARGE":isFeatureInPlan("ECOMMERCE_MEDIUM",e)?n="ECOMMERCE_MEDIUM":isFeatureInPlan("ECOMMERCE_SMALL",e)&&(n="ECOMMERCE_SMALL"),n},getMaximalPlan:function getMaximalPlan(e){var n,t=getAllTierPlans(e),a=Math.max();return t.forEach((function(e){e.grade>a&&(n=e,a=e.grade)})),n},getMinimalPlanWithFeature,getPlanDisplayName:function getPlanDisplayName(n){var t=_normalizePlan(n)?_normalizePlan(n).name:"unknown";return e.dmStr["ui.plans."+t]||t},canResellerPublishWithinPlan,getPlanFeatureMetadata:function getPlanFeatureMetadata(e,n){if(!(n=_normalizeFeature(n)))return null;var t=getMinimalPlanWithFeature(e,n);return t?t.featuresMetadata[n.id]:null},getFilterablePlans:function getFilterablePlans(){return[3,2,6,7,5].map(_normalizePlan).filter((function(e){return void 0!==e}))},isDPlan:function isDPlan(e){return e=_normalizePlan(e=e||$.dmx.site.planId),_contains(u,e.planId)},addWidgetFeature:function addWidgetFeature(e,n){f[e]=n},getWidgetFeature:function getWidgetFeature(e){return f[e]},isFeatureAvailableInTier:function isFeatureAvailableInTier(e,n){return null!=getMinimalPlanWithFeature(e,n,!1)},getAllTierPlans}),e.plansService=c}(window);
!function(){var p={openPopup:function openPopup(p){$.modulesManager.getModuleAsync("stripePopup").then((function(e){e.openStripePopup(p)}))}};window.$&&($.stripeService=p)}();
//# sourceMappingURL=https://sourcemaps-lambda.dwhitelabel.com/mnlt/production/5925/editor/dist/scripts/common.head.js.min.js.map
